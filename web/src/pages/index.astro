---
import Layout from '../components/layout.astro';
import Slices from '../components/slices.astro';
import * as sanity from '../lib/sanity.js';
import { Page } from '../lib/types.js';

const page = await sanity.query<Page>(/* groq */ `
    *[_id == 'home'][0] {
        ${sanity.fragments.page}
    }
`);
---

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parallax/3.1.0/parallax.min.js" />
</head>

<Layout title="Klangstof">
    <Slices slices={page.slices} />
</Layout>

<script type="module">
    document.querySelectorAll('.collage').forEach((collage) => {
        new Parallax(collage);
    })
</script>