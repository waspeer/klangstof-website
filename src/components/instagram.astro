---
import { getPosts } from '~/lib/instagram';

const feed = await getPosts();
---

<ul>
  {
    feed.map((post) => (
      <li>
        <a href={post.url} target="_blank" rel="noopener noreferrer">
          <img
            src={`https://images.weserv.nl/?url=${encodeURIComponent(post.thumbnail)}&w=230`}
            alt={post.caption}
          />
        </a>
      </li>
    ))
  }
</ul>

<style>
  ul {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: var(--font-size-md);
  }

  a {
    display: block;
    background-color: red;
    aspect-ratio: 0.8;
    overflow: hidden;
  }

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>
